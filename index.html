<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savings Jar Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: transparent;
        }

        #widget {
            width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 0;
        }

        #jar {
            width: 200px;
            height: 250px;
            position: relative;
            margin-bottom: 10px;
            z-index: 1;
        }

        #jar-container {
            width: 100%;
            height: 100%;
            position: relative;
            background-image: url('jar-image.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            z-index: 1;
        }

        #savings-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 0; /* Initially empty */
            background-color: rgba(76, 175, 80, 0.5); /* Green fill with 50% opacity */
            transition: height 0.3s ease-in-out;
            z-index: 1;
            mask: url(#jar-mask);
        }

        #total-savings, #goal-display {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2; /* Ensure text is above the jar and fill */
            pointer-events: none; /* Prevent the text from blocking clicks */
            text-shadow: 1px 1px 2px white, -1px -1px 2px white, 1px -1px 2px white, -1px 1px 2px white;
        }

        #total-savings {
            top: 40%;
            font-size: 24px;
            font-weight: bold;
            white-space: nowrap;
        }

        #goal-display {
            top: 60%;
            font-size: 16px;
            white-space: nowrap;
        }

        #input-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin: 5px 0;
            z-index: 2;
        }

        input {
            flex-grow: 1;
            padding: 5px;
            margin-right: 10px;
        }

        select {
            width: auto;
            padding: 5px;
        }

        #button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-top: 5px;
            z-index: 2; /* Ensure buttons are on top */
        }

        button {
            padding: 5px 10px;
            white-space: nowrap;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
            position: relative;
            z-index: 2; /* Ensure buttons are on top */
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div id="widget">
        <svg width="0" height="0">
            <defs>
                <mask id="jar-mask" maskUnits="userSpaceOnUse">
                    <!-- Use the paths from your SVG to define the mask -->
                    <rect width="100%" height="100%" fill="white"/>
                    <g fill="black">
                        <path d="M124.25 952.95 c-18 -0.90 -34.35 -5.35 -51.25 -14 -13.20 -6.70 -23.20 -14.05 -34.50 -25.40 -12.30 -12.30 -19.25 -21.95 -26.50 -36.80 -4.25 -8.65 -6.75 -15.30 -9.05 -24.20 -3.20 -12.35 -2.95 11.10 -2.95 -282.90 l0 -268.10 1.25 -7.15 c6.05 -34.95 20.15 -64.70 44.05 -92.95 9.25 -10.95 12.30 -16.75 23.20 -44.10 l2.15 -5.40 -1.40 -1.45 c-0.85 -0.90 -2.30 -1.65 -3.95 -2.05 -3.75 -0.90 -10.15 -3.70 -13.20 -5.80 -5.65 -3.90 -7.90 -8.75 -7.45 -16.10 0.25 -4.65 1.50 -8.15 4.25 -12.15 l1.50 -2.15 -0.90 -2.75 c-0.50 -1.50 -1.50 -4.10 -2.30 -5.75 -1.40 -2.90 -1.45 -3.25 -1.45 -10.50 0.05 -6.15 0.25 -8.25 1.15 -11.65 1.20 -4.45 3.30 -9.40 5.50 -13.10 l1.35 -2.25 0 -20.25 c0 -22.60 -0.15 -21.50 3.60 -25.05 2.90 -2.80 5 -3.60 16.40 -6.35 22.95 -5.55 35.50 -7.30 72.50 -10.05 32.25 -2.45 48.50 -3.05 87.50 -3.40 63.40 -0.50 123.45 2.35 160.25 7.60 10.90 1.60 30.60 4.95 36.60 6.25 9.10 2 13 4.80 14.70 10.65 1.25 4.45 1.25 18.30 -0.05 29.55 l-0.95 8.45 1.55 4.30 c0.85 2.35 2.50 6.75 3.65 9.75 3.40 8.85 4.15 12.20 4.20 19.30 0.05 5.55 -0.10 6.50 -1.05 8.50 -0.65 1.25 -1.90 3.05 -2.85 3.95 l-1.75 1.70 1.40 2.05 c3.40 4.95 4.55 8.90 4.55 15.65 0 5.55 -0.75 7.80 -3.65 11 -2.20 2.40 -3.55 3.25 -10.60 6.65 -7.90 3.80 -10.75 5.90 -10.75 7.85 0 2.05 4.10 12.65 7.50 19.35 4.60 9.20 10.05 17.95 17.70 28.55 15.25 21.15 17.85 24.85 20.80 29.50 11.35 18 18.80 37.80 23.40 62.25 l1.35 7.25 0.15 266.25 c0.15 295.80 0.45 268.90 -3.20 284 -8 32.75 -27.75 60.25 -57.70 80.25 -19.75 13.20 -40.10 19.90 -64.40 21.25 -10.40 0.55 -238.95 0.55 -250.35 -0.05z"/>
                        <path d="M225 932.65 c-64.15 -1.50 -118.65 -10.70 -136.85 -23.05 -6.05 -4.10 -8.10 -7.65 -8.15 -13.90 0 -3.30 0.20 -4.45 1.30 -6.60 7.50 -15.05 53.40 -25.85 125.95 -29.70 15.30 -0.80 64.80 -0.80 79.75 0 33.40 1.85 60.55 4.95 81.25 9.35 26.10 5.60 40.30 12.05 44.55 20.35 1.65 3.25 1.75 10 0.15 13.25 -1.30 2.70 -5.55 6.60 -9.75 8.95 -26 14.55 -98.70 23.25 -178.20 21.35z"/>
                        <path d="M28.95 770.85 c-3.35 -2.20 -3.45 -2.90 -3.45 -19.25 l0 -14.70 1.70 -1.70 c1.60 -1.60 1.90 -1.70 5.25 -1.70 3.20 0 3.70 0.15 5.15 1.45 1.60 1.40 1.65 1.65 2 6.15 0.40 6.05 0.40 17.45 0 23.05 -0.35 4.30 -0.40 4.50 -2.20 6.15 -1.60 1.45 -2.25 1.70 -4.30 1.70 -1.70 0 -2.95 -0.35 -4.15 -1.15z"/>
                        <path d="M454.25 769.85 c-2.05 -2 -2.15 -2.30 -2.45 -5.85 -0.55 -6.60 -0.15 -26.60 0.60 -27.85 1.10 -1.95 3.40 -2.80 7.15 -2.55 4.25 0.25 5.70 1.35 6.20 4.80 0.20 1.25 0.35 8.10 0.35 15.15 -0.05 11.10 -0.15 13.15 -0.90 14.70 -1.20 2.60 -3.10 3.75 -6.20 3.75 -2.45 0 -2.80 -0.15 -4.75 -2.15z"/>
                        <path d="M27.85 719.55 l-2.10 -2 -0.25 -86.15 c-0.20 -62.95 -0.10 -86.55 0.30 -87.65 1 -2.65 2.85 -3.90 6.15 -4.15 2 -0.15 3.45 0.05 4.60 0.60 3.45 1.65 3.20 -5.85 3.35 89.05 0.10 47.30 0.05 86.45 -0.10 87 -0.15 0.55 -1.10 2 -2.05 3.15 -1.75 2.05 -1.90 2.10 -4.80 2.10 -2.80 0 -3.15 -0.15 -5.10 -1.95z"/>
                        <path d="M455.15 720.45 c-3.50 -2.20 -3.20 5.90 -3.20 -90.25 0 -79.25 0.05 -86.90 0.80 -88.05 2.55 -3.85 11.10 -3.40 12.85 0.75 0.45 1 0.60 22.05 0.65 87.35 l0 85.95 -1.45 2.15 c-0.75 1.20 -1.80 2.40 -2.30 2.65 -1.60 0.85 -5.60 0.55 -7.35 -0.55z"/>
                        <path d="M28.35 347.50 c-0.70 -0.55 -1.75 -2 -2.35 -3.25 -1.05 -2.15 -1.05 -2.45 -0.55 -9.60 2.75 -36.35 12.65 -66.30 31.20 -94.40 6.60 -10.05 23.25 -31.50 25.60 -33.05 0.95 -0.60 2.05 -0.75 4.50 -0.60 2.90 0.15 3.50 0.40 4.85 1.80 1.45 1.40 1.65 1.95 1.80 4.95 0.15 3 0 3.70 -1.35 5.90 -0.80 1.40 -3.80 5.30 -6.65 8.75 -12.60 15.15 -20.10 26.55 -27.45 41.75 -10.60 21.80 -16.55 44.75 -18.25 70.50 -0.35 5.10 -0.45 5.60 -1.75 6.85 -1.25 1.25 -1.70 1.40 -4.85 1.40 -2.70 0 -3.75 -0.20 -4.75 -1z"/>
                        <path d="M463.55 347.15 c-1.30 -1.35 -1.35 -1.75 -1.95 -9.65 -1.90 -24.95 -8 -47.80 -18.60 -69.05 -7.10 -14.30 -14.55 -25.60 -26 -39.40 -8 -9.65 -9.15 -11.75 -8.90 -15.95 0.15 -2.70 0.40 -3.35 1.80 -4.70 1.45 -1.45 1.95 -1.65 5.15 -1.80 l3.55 -0.20 2.55 2.70 c3 3.10 17.20 21.45 21.95 28.40 17.65 25.70 28.85 56.20 32.10 87.50 1.45 14.15 1.55 17.10 0.35 19.40 -1.65 3.25 -3.10 4.10 -7.15 4.10 -3.15 0 -3.60 -0.15 -4.85 -1.35z"/>
                        <path d="M96.05 198.85 c-4.05 -1.45 -4.85 -5.45 -2.90 -14.20 1.60 -7.10 4.10 -14.95 5.40 -17.05 2.40 -4.05 10.15 -4.10 12.80 -0.15 2.15 3.15 1.50 7.10 -3.90 23.35 -1.20 3.65 -2.45 6.45 -3.10 7.10 -1.40 1.35 -5.90 1.85 -8.30 0.95z"/>
                        <path d="M399.45 199.15 c-2.75 -0.45 -3.90 -2.85 -8.15 -17.30 -2.50 -8.35 -2.75 -11.15 -1.40 -13.85 2.35 -4.80 10.70 -4.65 13.40 0.20 2.25 4 6.20 19.45 6.20 24.20 0 5.25 -3.70 7.75 -10.05 6.75z"/>
                        <path d="M229.75 108.95 c-53.85 -1.15 -96.80 -6.05 -116.35 -13.30 l-3.40 -1.25 0 -2 0 -2 3.10 0.30 c1.75 0.15 6.55 0.55 10.65 0.80 4.15 0.30 18.75 1.45 32.50 2.50 56.10 4.45 74.05 5.25 107 4.85 23.30 -0.30 31.40 -0.65 75.50 -3.35 13.50 -0.85 28.05 -1.65 32.40 -1.85 l7.85 -0.30 0 1.80 c0 1.70 -0.10 1.80 -2.85 2.85 -11.95 4.45 -34.80 7.85 -66.15 9.75 -11.45 0.70 -53.05 1.85 -60 1.65 -1.50 -0.05 -10.60 -0.25 -20.25 -0.45z"/>
                    </g>
                </mask>
            </defs>
        </svg>

        <div id="jar">
            <div id="jar-container">
                <div id="savings-fill"></div>
                <div id="total-savings">$0</div>
                <div id="goal-display">Goal: $0</div>
            </div>
        </div>
        <div id="input-container">
            <input type="number" id="savings-input" placeholder="How much did you save today?">
            <select id="currency-select">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="JPY">JPY</option>
                <option value="GBP">GBP</option>
                <option value="AUD">AUD</option>
                <option value="CAD">CAD</option>
                <option value="CHF">CHF</option>
                <option value="CNY">CNY</option>
                <option value="SEK">SEK</option>
                <option value="NZD">NZD</option>
                <option value="MXN">MXN</option>
                <option value="SGD">SGD</option>
                <option value="HKD">HKD</option>
                <option value="NOK">NOK</option>
                <option value="KRW">KRW</option>
                <option value="TRY">TRY</option>
                <option value="INR">INR</option>
                <option value="BRL">BRL</option>
                <option value="ZAR">ZAR</option>
            </select>
        </div>
        <div id="button-container">
            <button id="add-savings-btn">Add</button>
            <button id="clear-savings-btn">Clear All</button>
            <button id="set-goal-btn">Set Goal</button>
        </div>
    </div>
    <script>
        // Global variables
        let totalSavings = 0;
        let savingsGoal = 0;
        let currentCurrency = 'USD';

        const currencySymbols = {
            USD: '$', EUR: '€', JPY: '¥', GBP: '£', AUD: 'A$', CAD: 'C$', 
            CHF: 'Fr', CNY: '¥', SEK: 'kr', NZD: 'NZ$', MXN: '$', SGD: 'S$', 
            HKD: 'HK$', NOK: 'kr', KRW: '₩', TRY: '₺', INR: '₹', 
            BRL: 'R$', ZAR: 'R'
        };

        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('savingsJarData');
            if (savedData) {
                const data = JSON.parse(savedData);
                totalSavings = data.totalSavings;
                savingsGoal = data.savingsGoal;
                currentCurrency = data.currentCurrency;
                document.getElementById('currency-select').value = currentCurrency;
                updateDisplay();
            }
        }

        // Save data to localStorage
        function saveData() {
            const data = {
                totalSavings,
                savingsGoal,
                currentCurrency
            };
            localStorage.setItem('savingsJarData', JSON.stringify(data));
        }

        // Update the display with the current savings and goal
        function updateDisplay() {
            const totalElement = document.getElementById('total-savings');
            const goalElement = document.getElementById('goal-display');
            const fillElement = document.getElementById('savings-fill');
            const symbol = currencySymbols[currentCurrency];
            
            if (['USD', 'CAD', 'AUD', 'HKD', 'SGD', 'NZD'].includes(currentCurrency)) {
                totalElement.textContent = `${symbol}${totalSavings.toFixed(2)}`;
                goalElement.textContent = `Goal: ${symbol}${savingsGoal.toFixed(2)}`;
            } else {
                totalElement.textContent = `${totalSavings.toFixed(2)} ${symbol}`;
                goalElement.textContent = `Goal: ${savingsGoal.toFixed(2)} ${symbol}`;
            }

            const fillHeight = savingsGoal > 0 ? Math.min((totalSavings / savingsGoal) * 100, 100) : 0;
            fillElement.style.height = `${fillHeight}%`;
        }

        // Initialize when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();

            document.getElementById('add-savings-btn').addEventListener('click', function() {
                const input = document.getElementById('savings-input');
                const amount = parseFloat(input.value);
                if (!isNaN(amount) && amount > 0) {
                    totalSavings += amount;
                    updateDisplay();
                    saveData();
                    input.value = '';
                } else {
                    alert('Please enter a valid positive number.');
                }
            });

            document.getElementById('clear-savings-btn').addEventListener('click', function() {
                totalSavings = 0;
                updateDisplay();
                saveData();
            });

            document.getElementById('set-goal-btn').addEventListener('click', function() {
                const newGoal = prompt("Enter your savings goal:");
                const goalAmount = parseFloat(newGoal);
                if (!isNaN(goalAmount) && goalAmount > 0) {
                    savingsGoal = goalAmount;
                    updateDisplay();
                    saveData();
                } else {
                    alert('Please enter a valid positive number for your goal.');
                }
            });

            document.getElementById('currency-select').addEventListener('change', function() {
                currentCurrency = this.value;
                updateDisplay();
                saveData();
            });
        });
    </script>
</body>
</html>
